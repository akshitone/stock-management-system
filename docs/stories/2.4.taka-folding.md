# Story 2.4: Taka Folding

## Status

Draft

## Story

**As a** production manager,
**I want** to convert grey takas to folded takas with shrinkage calculation,
**so that** I can track finished goods inventory.

## Acceptance Criteria

1. POST `/takas/fold` converts grey takas to folded
2. Input grey taka IDs, output folded taka with shrinkage applied
3. Shrinkage auto-calculated: output_meters = input_meters - loss
4. Grey takas marked as 'processed'
5. New folded taka created with dual UOM

## Tasks / Subtasks

- [ ] Create fold endpoint
- [ ] Implement shrinkage calculation
- [ ] Update grey taka status
- [ ] Create folded taka
- [ ] Write tests

## Dev Notes

### Folding Logic

- Takes multiple grey takas as input
- Calculates total input meters
- Applies shrinkage percentage
- Creates single folded taka

### Shrinkage Calculation

```
output_meters = input_meters * (1 - shrinkage_percent / 100)
```

## Testing

- Test folding creates folded taka
- Test shrinkage calculation accuracy
- Test grey takas status updated

## Change Log

| Date       | Version | Description            | Author    |
| ---------- | ------- | ---------------------- | --------- |
| 2026-01-09 | 1.0     | Initial story creation | Architect |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_
