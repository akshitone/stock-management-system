# Story 4.3: Sales Return

## Status

Draft

## Story

**As an** accountant,
**I want** to process sales returns,
**so that** I can create credit notes and restore stock.

## Acceptance Criteria

1. POST `/sales-returns` creates credit note
2. Stock restored (takas marked inStock again)
3. Party balance credited
4. Reference to original invoice

## Tasks / Subtasks

- [ ] Create SalesReturn logic in InvoiceService
- [ ] Emit stock restoration event
- [ ] Emit ledger credit event
- [ ] Write tests

## Dev Notes

### Sales Return

- Type = 'salesReturn' on Invoice schema
- Links to original invoice
- Negative amounts for reporting

## Testing

- Test return creates credit note
- Test stock restored
- Test party balance updated

## Change Log

| Date       | Version | Description            | Author    |
| ---------- | ------- | ---------------------- | --------- |
| 2026-01-09 | 1.0     | Initial story creation | Architect |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_
