# Story 3.2: Stock Events

## Status

Draft

## Story

**As a** developer,
**I want** inventory updated via events,
**so that** stock stays consistent across modules.

## Acceptance Criteria

1. Listen to TakaCreatedEvent - add to stock
2. Listen to InvoiceFinalizedEvent - deduct stock
3. Listen to SalesReturnEvent - add back to stock
4. Stock updates are transactional

## Tasks / Subtasks

- [ ] Create event listeners in Inventory module
- [ ] Handle TakaCreatedEvent
- [ ] Handle stock deduction events
- [ ] Write tests for event handling

## Dev Notes

### Events to Handle

- `TakaCreatedEvent` → Increase stock
- `InvoiceFinalizedEvent` → Decrease stock (mark takas as 'sold')
- `SalesReturnEvent` → Increase stock (mark takas as 'inStock')

## Testing

- Test event listeners update taka status
- Test stock summary reflects changes

## Change Log

| Date       | Version | Description            | Author    |
| ---------- | ------- | ---------------------- | --------- |
| 2026-01-09 | 1.0     | Initial story creation | Architect |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_
