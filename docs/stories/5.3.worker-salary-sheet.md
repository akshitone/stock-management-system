# Story 5.3: Worker Salary Sheet

## Status

Draft

## Story

**As an** accountant,
**I want** to generate worker salary sheets,
**so that** I can calculate wages from production logs.

## Acceptance Criteria

1. GET `/finance/salary-sheet` returns calculation preview
2. POST `/finance/salary-sheet/generate` creates salary sheet
3. Calculation based on production logs and worker rates
4. Date range selection
5. Breakdown by worker showing: takas produced, meters, rate, total

## Tasks / Subtasks

- [ ] Create salary sheet endpoint
- [ ] Query production logs for date range
- [ ] Calculate wages based on worker rates
- [ ] Return detailed breakdown
- [ ] Write tests

## Dev Notes

### Salary Calculation

```typescript
for each worker:
  production = takas.aggregate(weaverId = worker, date in range)
  wages = production.meters * worker.rate (or totalTakas * rate based on rateUnit)
```

### Response

```typescript
{
  dateRange: { from, to },
  workers: [{
    workerId: string,
    workerName: string,
    totalMeters: number,
    totalTakas: number,
    rate: number,
    rateUnit: string,
    totalWages: number
  }],
  grandTotal: number
}
```

## Testing

- Test salary calculation accuracy
- Test grouping by worker

## Change Log

| Date       | Version | Description            | Author    |
| ---------- | ------- | ---------------------- | --------- |
| 2026-01-09 | 1.0     | Initial story creation | Architect |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_
