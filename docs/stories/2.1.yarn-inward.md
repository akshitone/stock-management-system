# Story 2.1: Yarn Inward

## Status

Draft

## Story

**As a** store keeper,
**I want** to record yarn purchases with lot tracking,
**so that** I can track raw material inventory.

## Acceptance Criteria

1. Yarn schema with lotNo, qualityId, supplierId, count, quantity (cartoons/cops/kgs), rate, balance
2. POST `/yarn/inward` creates yarn entry
3. GET `/yarn` returns yarn list with current balance
4. GET `/yarn/:id/transactions` shows usage history
5. Balance auto-updated when yarn used in beam creation

## Tasks / Subtasks

- [ ] Create Production module structure
- [ ] Create Yarn schema
- [ ] Create Yarn service with inward and balance tracking
- [ ] Create Yarn controller
- [ ] Write unit tests

## Dev Notes

### Yarn Schema

```typescript
{
  lotNo: string,          // unique
  qualityId: ObjectId,
  supplierId: ObjectId,
  count: string,          // e.g., "20s", "40s"
  quantity: {
    cartoons: number,
    cops: number,
    kgs: number
  },
  rate: number,
  receivedDate: Date,
  balance: {
    cartoons: number,
    cops: number,
    kgs: number
  }
}
```

## Testing

- Test inward creates yarn with correct balance
- Test balance equals quantity on creation

## Change Log

| Date       | Version | Description            | Author    |
| ---------- | ------- | ---------------------- | --------- |
| 2026-01-09 | 1.0     | Initial story creation | Architect |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_
