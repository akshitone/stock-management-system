# Story 4.1: Sales Order

## Status

Draft

## Story

**As a** sales person,
**I want** to create sales orders,
**so that** I can track customer commitments.

## Acceptance Criteria

1. SalesOrder schema with orderNo, partyId, items, brokerId, status
2. GET `/sales-orders` with status filter
3. POST `/sales-orders` creates order
4. PUT `/sales-orders/:id` updates order
5. POST `/sales-orders/:id/cancel` cancels order
6. Items track pending quantity for partial fulfillment

## Tasks / Subtasks

- [ ] Create Trading module
- [ ] Create SalesOrder schema
- [ ] Create SalesOrder service
- [ ] Create SalesOrder controller
- [ ] Write tests

## Dev Notes

### SalesOrder Schema

```typescript
{
  orderNo: string,
  partyId: ObjectId,
  orderDate: Date,
  items: [{
    qualityId: ObjectId,
    meters: number,
    takas: number,
    rate: number,
    pending: { meters, takas }
  }],
  brokerId: ObjectId,
  status: 'open' | 'partial' | 'fulfilled' | 'cancelled'
}
```

## Testing

- Test order creation
- Test status transitions

## Change Log

| Date       | Version | Description            | Author    |
| ---------- | ------- | ---------------------- | --------- |
| 2026-01-09 | 1.0     | Initial story creation | Architect |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_
