# Story 5.2: Party Ledger

## Status

Draft

## Story

**As an** accountant,
**I want** to view party ledger transactions,
**so that** I can track receivables and payables.

## Acceptance Criteria

1. GET `/finance/ledger/:partyId` returns transaction history
2. Transactions include invoices and payments
3. Running balance calculated
4. Date range filter supported

## Tasks / Subtasks

- [ ] Create ledger query endpoint
- [ ] Aggregate invoices and payments
- [ ] Calculate running balance
- [ ] Write tests

## Dev Notes

### Ledger Response

```typescript
{
  partyId: string,
  partyName: string,
  openingBalance: number,
  transactions: [{
    date: Date,
    type: 'invoice' | 'payment' | 'return',
    reference: string,    // invoice/voucher no
    debit: number,
    credit: number,
    balance: number       // running
  }],
  closingBalance: number
}
```

## Testing

- Test ledger shows all transactions
- Test running balance accuracy
- Test date range filter

## Change Log

| Date       | Version | Description            | Author    |
| ---------- | ------- | ---------------------- | --------- |
| 2026-01-09 | 1.0     | Initial story creation | Architect |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_
